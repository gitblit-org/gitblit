[{"date":"2014-11-20T16:46:40Z","author":"fzs","fields":{"title":"Invalid email addresses result in an inifinite loop of retries.","body":"When Gitblit send an email, e.g. for a ticket, and some email addresses are rejected, e.g. because they do not exist or the SMTP server denies relaying them, the email delivery for all recipients fails and will retried ad inifinitum, every two minutes, as long as the SMPT server keeps rejecting the same addresses.\n\nFirst, the logging could be improved for failed emails, listing the invalid addresses. I don\u0027t know if there are privacy concerns around this.\n\nSecond, we need to find a strategy to deal with invalid addresses on failed delivery. Should they be retried at all, if yes, how often and in what intervals? It\u0027s not very nice to keep hammering a SMTP server every two minutes. Some throttling would be nicer.\n\nI would suggest to re-queue the message with only the valid unset recipients. Then either discard the invalid recipient, assuming they will never go through, or re-queue a copy with the invalid recipients while at the same time keeping a counter of retries for this message.","type":"Bug","severity":"Minor","priority":"Normal","mergeTo":"develop","watchers":"+fzs","status":"New"}},{"date":"2014-11-20T19:10:14Z","author":"james","comment":{"text":"I don\u0027t have a ton of experience with different SMTP servers, but the ones I\u0027ve used before maintain their own outgoing queue which disconnects Gitblit from the SMTP\u0027s actual sending process and makes recipient validation asynchronous.  In those scenarios there are bounce-back emails rather than thrown exceptions or hand-off failures.  Once Gitblit successfully hands-off the message to the SMTP server, it won\u0027t be re-tried form Gitblit.\n\nWhat SMTP server are you using?","id":"b5f443d19cbb9b9e1a7bdc1c9860ac812344ff01"},"fields":{"watchers":"+james"}}]