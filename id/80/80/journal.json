[{"date":"2014-05-16T14:19:02Z","author":"james","fields":{"title":"Re-evalulate Servlet3 and DI","body":"As part of the massive 1.4.0 refactor, I introduced [Dagger](http://square.github.io/dagger) for DI and updated to *Servlet3* which allowed me to eliminate almost everything in *web.xml*.\n\nThis worked great... until you ran Gitblit in a JEE container with CDI.  Gitblit would fail to load properly because the container\u0027s dependency injector was intercepting all `@Inject` references thus not allowing Dagger to do it\u0027s job.  This was bad and I couldn\u0027t figure out how to stop the container from *helping* so I rolled-back to Servlet 2.4 in 65d5bb3f1cbfb42be5a3c4aa077b7ab2504082af and eliminated all JSR-330 annotations but retained Dagger in a reduced capacity.\n\nI want to take another stab at this (Dagger pun intended).  I\u0027ve stumbled across [this short page](http://docs.oracle.com/javaee/6/tutorial/doc/gjbnz.html) which may make Dagger DI using JSR-330 annotations work properly in a JEE container.  More details about *beans.xml* are available [here](http://www.seamframework.org/124139.lace).\n\nA switch to Guice is also a possibility, although I need to understand the limitations of Dagger (and the presumed benefits of Guice) before making that jump.","type":"Task","responsible":"james","mergeTo":"develop","watchers":"+james","status":"New"}},{"date":"2014-05-16T14:35:32Z","author":"james","fields":{"topic":"servlet3"},"patchset":{"number":1,"rev":1,"tip":"5e251e9d5c400722d664e7138875fba1bb2162b7","base":"5196d03ddf2a56048f33eabe4dc4bf055164ad81","insertions":651,"deletions":351,"commits":1,"added":0,"type":"Proposal"}},{"date":"2014-05-16T17:51:28Z","author":"james","patchset":{"number":1,"rev":2,"tip":"815b2e312496b0638faa4472f0d7dffd6aea419a","parent":"5e251e9d5c400722d664e7138875fba1bb2162b7","base":"5196d03ddf2a56048f33eabe4dc4bf055164ad81","insertions":385,"deletions":613,"commits":3,"added":2,"type":"FastForward"}},{"date":"2014-05-16T20:16:55Z","author":"james","patchset":{"number":1,"rev":3,"tip":"01c48c226cf12c31945916110450d6f2a2f48f3f","parent":"815b2e312496b0638faa4472f0d7dffd6aea419a","base":"5196d03ddf2a56048f33eabe4dc4bf055164ad81","insertions":190,"deletions":457,"commits":5,"added":2,"type":"FastForward"}},{"date":"2014-05-23T12:19:35Z","author":"james","fields":{"watchers":"+davido"},"patchset":{"number":1,"rev":4,"tip":"27f46b9c95d1ed8d8cc57bba63af172ed7cf9888","parent":"01c48c226cf12c31945916110450d6f2a2f48f3f","base":"5196d03ddf2a56048f33eabe4dc4bf055164ad81","insertions":201,"deletions":378,"commits":6,"added":1,"type":"FastForward"}},{"date":"2014-05-24T13:21:54Z","author":"james","patchset":{"number":1,"rev":5,"tip":"d99656b32d9ea2e7730a1a310fb30f78874a0db1","parent":"27f46b9c95d1ed8d8cc57bba63af172ed7cf9888","base":"5196d03ddf2a56048f33eabe4dc4bf055164ad81","insertions":0,"deletions":2,"commits":7,"added":1,"type":"FastForward"}},{"date":"2014-06-12T22:22:00Z","author":"james","patchset":{"number":1,"rev":6,"tip":"6fadc71928adfef89844393d5424cb1d28add0a3","parent":"d99656b32d9ea2e7730a1a310fb30f78874a0db1","base":"5196d03ddf2a56048f33eabe4dc4bf055164ad81","insertions":64,"deletions":71,"commits":8,"added":1,"type":"FastForward"}},{"date":"2014-06-12T23:21:08Z","author":"james","patchset":{"number":2,"rev":1,"tip":"a4b7b12afd0ec92c272b1da7461f85180a341a29","base":"2bfea381bbcea934f7e20f8c00db86e990c2fc93","insertions":744,"deletions":1130,"commits":8,"added":0,"type":"Rebase"}},{"date":"2014-06-12T23:21:43Z","author":"james","patchset":{"number":2,"rev":2,"tip":"773360444c2bcf475b04453d491537e7b3d79971","parent":"a4b7b12afd0ec92c272b1da7461f85180a341a29","base":"2bfea381bbcea934f7e20f8c00db86e990c2fc93","insertions":10,"deletions":5,"commits":9,"added":1,"type":"FastForward"}},{"date":"2014-06-12T23:27:28Z","author":"james","patchset":{"number":2,"rev":3,"tip":"61e2cee4ca9233c778b448b293ecd04155daf2e2","parent":"773360444c2bcf475b04453d491537e7b3d79971","base":"2bfea381bbcea934f7e20f8c00db86e990c2fc93","insertions":6,"deletions":5,"commits":10,"added":1,"type":"FastForward"}},{"date":"2014-06-17T13:13:31Z","author":"davido","comment":{"text":"This looks very proomissing to me and seems to be the way to go for now.","id":"73ec2378dccd7490d445d4ef8ee1b26e080fc37a"}},{"date":"2014-06-17T13:17:27Z","author":"james","comment":{"text":"I agree.  But I would really prefer not to maintain my own Guice fork.  :(\nhttps://code.google.com/p/google-guice/issues/detail?id\u003d807","id":"7e20635b6e1a605d5eebf44c4eeea84d63fd5257"}},{"date":"2014-06-17T13:45:59Z","author":"davido","comment":{"text":"For one we are talking about Guice servlet extensions patch and not Guice core. For another we have found cookie bug in the same code recently [1], that was fixed within hours, but wasn\u0027t released yet, that forced us to build our own release of servlet-extensions [2]. So i expect Sam and Dhanji would help, once we figure out why your patch is breaking some tests (haven\u0027t look into it).\n\n* [1] https://code.google.com/p/google-guice/issues/detail?id\u003d806\n* [2] https://gerrit-review.googlesource.com/57306","id":"76bbbe4e50484506263e46f739b4f277513ca09c"}},{"date":"2014-06-17T14:18:27Z","author":"james","comment":{"text":"Yeah, I saw that you reported 806 the day before I reported 807.  :)  servlet-extension vs core.  Right, but I don\u0027t want to maintain patched *anything*.  I want every release to be buildable from stock jars.  So far that has worked-out, but I concede that it may not always be possible.\n\nIf you are so inclined, an obvious place to re-instate the Provider pattern would be the plugins \u0026\u0026 the plugin manager.\n\nI still haven\u0027t found *the* solution in reconciling use of JSR-330 without using CDI in a JEE7 container.  **But** use of the *com.google.Annotation* is an alternative that I am happy with and moves us forward - assuming some variation of my patch lands in guice-servlet.","id":"6fa7a1f194be4d17d064b69bc1c05457dad3badf"}},{"date":"2014-07-01T01:34:07Z","author":"james","patchset":{"number":2,"rev":4,"tip":"d7a4cf682df4ddf55c2f98fcc9263567644560a8","parent":"61e2cee4ca9233c778b448b293ecd04155daf2e2","base":"2bfea381bbcea934f7e20f8c00db86e990c2fc93","insertions":10,"deletions":12,"commits":11,"added":1,"type":"FastForward"}},{"date":"2014-07-01T01:40:58Z","author":"james","patchset":{"number":3,"rev":1,"tip":"38408d97a1c8378480ee1e5e415b2d4a6835f571","base":"9b89bf102d1fb2cb96ce96eec746a594e539125c","insertions":747,"deletions":1121,"commits":11,"added":0,"type":"Rebase"}},{"date":"2014-07-01T02:33:39Z","author":"james","patchset":{"number":3,"rev":2,"tip":"a9bec84b8fce857613c53777041f4124c45cb9fa","parent":"38408d97a1c8378480ee1e5e415b2d4a6835f571","base":"9b89bf102d1fb2cb96ce96eec746a594e539125c","insertions":0,"deletions":10,"commits":12,"added":1,"type":"FastForward"}},{"date":"2014-07-01T02:49:33Z","author":"james","patchset":{"number":3,"rev":3,"tip":"b9274a6faf38382f0686452e72611f626da57a64","parent":"a9bec84b8fce857613c53777041f4124c45cb9fa","base":"9b89bf102d1fb2cb96ce96eec746a594e539125c","insertions":18,"deletions":18,"commits":13,"added":1,"type":"FastForward"}},{"date":"2014-07-01T03:28:39Z","author":"james","patchset":{"number":3,"rev":4,"tip":"5c18d423d822a9ba536d1c6e98e9367a38c8cbe0","parent":"b9274a6faf38382f0686452e72611f626da57a64","base":"9b89bf102d1fb2cb96ce96eec746a594e539125c","insertions":11,"deletions":0,"commits":14,"added":1,"type":"FastForward"}},{"date":"2014-07-01T03:29:14Z","author":"james","patchset":{"number":4,"rev":1,"tip":"0e0c307e52271eab0431695cbb2bda2777eb4dc0","base":"98cf13665a1fa5fa88976bf38f6787b56a085fec","insertions":764,"deletions":1137,"commits":14,"added":0,"type":"Rebase"}},{"date":"2014-07-01T14:24:06Z","author":"james","fields":{"title":"Replace Dagger with Guice","status":"Open","milestone":"v1.7.0"}},{"date":"2014-07-01T14:27:02Z","author":"james","comment":{"text":"I am now maintaining a fork of *guice-servlet* with the filter fixes I need to enforce security. The patchset in this ticket will retrieve my fork from my GitHub-hosted Maven repository.","id":"e84553ecd3dcc6efec682a3100c5a3ac61fb9b5b"}},{"date":"2014-07-01T15:31:49Z","author":"james","fields":{"voters":"+james"}}]